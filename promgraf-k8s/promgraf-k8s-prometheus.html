<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE Enterprise Containers | Prometheus UI</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-Synergy/assets/css/styles.60b2dfba.css" as="style"><link rel="preload" href="/Docker-Synergy/assets/js/app.60b2dfba.js" as="script"><link rel="preload" href="/Docker-Synergy/assets/js/6.0fa2c4ad.js" as="script"><link rel="prefetch" href="/Docker-Synergy/assets/js/1.9435caa1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/10.56ec9916.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/100.1865d5f9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/101.09c76994.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/102.1e738fb2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/103.39341665.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/104.7261cd8b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/105.4f222b90.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/106.ab348ea0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/107.05f2d3e9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/108.625e88c6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/11.9581c9e6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/12.729bbadb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/13.2956f066.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/14.5a144bdc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/15.6aca671f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/16.f7c2a41f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/17.126db08a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/18.a677b8a9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/19.f5b102c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/2.a8c6b452.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/20.d1c31bb2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/21.2e9564fe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/22.ed6a6362.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/23.bae633e4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/24.f437183d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/25.47f60376.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/26.e81fa223.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/27.03346382.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/28.63524409.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/29.7e0bd54e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/3.67c92d52.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/30.48ba5cfc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/31.463cff78.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/32.ac3b0e33.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/33.2bf82de9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/34.1d5e46f4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/35.30905600.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/36.1f2ac89d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/37.e4c79daf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/38.8bed7bf9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/39.98994146.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/4.363b5656.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/40.8eae7677.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/41.3e4168f1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/42.3ba74ae9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/43.72599437.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/44.1735c154.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/45.56ae429e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/46.30933404.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/47.ae580beb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/48.54830936.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/49.f6e1e1f6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/5.3420d8f9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/50.5ba8859a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/51.8121c744.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/52.c6aed27d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/53.e21db18d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/54.138a86f3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/55.b3aa04b1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/56.1233748d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/57.3801320b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/58.c9e4b28b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/59.073c9a09.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/60.3b0710f8.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/61.ab3522ed.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/62.bcbae7e0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/63.08553e1b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/64.7b1d1b05.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/65.8ed9d62a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/66.8edb25f6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/67.4727fc6f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/68.0fda644b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/69.5e10210d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/7.67571813.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/70.0fba869c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/71.1b81b5c1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/72.a3708c9f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/73.8084709c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/74.c6b92480.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/75.0aa461a8.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/76.1f78f475.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/77.3bc99dd4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/78.bf3ce707.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/79.a21f49ee.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/8.5e9abf7f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/80.ad501796.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/81.2871854f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/82.e806cc3a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/83.9927006c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/84.48c0835e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/85.4a4874d2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/86.f79bd6bb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/87.08bd836f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/88.61e71e39.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/89.aff17c9d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/9.a1c180e9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/90.ea0ad8a7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/91.300f83b1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/92.3c9dac39.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/93.7beffc25.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/94.c5443ccd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/95.92f453b5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/96.1246dba7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/97.56da5ba9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/98.5f2bd081.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/99.26ef7258.js">
    <link rel="stylesheet" href="/Docker-Synergy/assets/css/styles.60b2dfba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Docker-Synergy/" class="home-link router-link-active"><!----><span class="site-name">
      HPE Enterprise Containers
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preparing the environment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring the core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring Storage</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Windows VM workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying bare metal workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Deploying Prometheus and Grafana on Kubernetes</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-overview.html" class="sidebar-link">Monitoring Kubernetes with Prometheus and Grafana</a></li><li><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-playbooks.html" class="sidebar-link">Playbooks for installing Prometheus and Grafana on Kubernetes</a></li><li><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-prometheus.html" class="active sidebar-link">Prometheus UI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-prometheus.html#node-exporter" class="sidebar-link">Node Exporter</a></li><li class="sidebar-sub-header"><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-prometheus.html#cadvisor" class="sidebar-link">cAdvisor</a></li></ul></li><li><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-grafana.html" class="sidebar-link">Grafana UI</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker Swarm</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Backup and restore</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="prometheus-ui"><a href="#prometheus-ui" aria-hidden="true" class="header-anchor">#</a> Prometheus UI</h1><p>The Prometheus UI is available via your UCP, DTR or Kubernetes worker nodes, using <code>HTTP</code> on port <code>33090</code>, for example,</p><pre class="language-text"><code>http://hpe-ucp01.am2.cloudra.local:33090
</code></pre><p>To see what services are being monitored, access the service discovery page, via <code>Status -&gt; Service Discovery</code>, or using the <code>/service-discovery</code> endpoint:</p><pre class="language-text"><code>http://hpe2-ucp01.am2.cloudra.local:33090/service-discovery
</code></pre><p>The monitored services are listed as shown in the following figure.</p><p><img src="/Docker-Synergy/assets/img/prometheus-k8s-service-discovery.84a5307c.png" alt=""Prometheus service discovery""></p><p><strong>Figure:</strong> Prometheus service discovery</p><p>To see the status for the monitored services, access the targets page via <code>Status -&gt; Targets</code> or using the endpoint <code>/targets</code>.</p><pre class="language-text"><code>http://hpe2-ucp01.am2.cloudra.local:33090/targets
</code></pre><p>The status of the various monitors are displayed,  as shown in the following figure.</p><p><img src="/Docker-Synergy/assets/img/prometheus-k8s-targets.5f8c7de1.png" alt=""Prometheus targets""></p><p><strong>Figure:</strong> Prometheus targets</p><p>To see all the metrics available, click on Graph or use the endpoint <code>/graph</code>:</p><pre class="language-text"><code>http://hpe2-ucp01.am2.cloudra.local:33090/graph
</code></pre><p>Click on the drop-down titled <code>- insert metric at cursor -</code> to see all the metrics that are available to Prometheus.</p><p><img src="/Docker-Synergy/assets/img/prometheus-k8s-metrics.1491a996.png" alt=""Prometheus targets""></p><p><strong>Figure:</strong> Prometheus metrics</p><h2 id="node-exporter"><a href="#node-exporter" aria-hidden="true" class="header-anchor">#</a> Node Exporter</h2><p>Metrics specific to the Node Exporter are prefixed with <code>node_</code> and include metrics like <code>node_cpu_seconds_total</code> and <code>node_exporter_build_info</code>. The table below lists some example expressions.</p><table><thead><tr><th>Metric</th><th>Meaning</th></tr></thead><tbody><tr><td>rate(node_cpu_seconds_total{mode=&quot;system&quot;}[1m])</td><td>The average amount of CPU time spent in system mode, per second, over the last minute (in seconds)</td></tr><tr><td>node_filesystem_avail_bytes</td><td>The filesystem space available to non-root users (in bytes)</td></tr><tr><td>rate(node_network_receive_bytes_total[1m])</td><td>The average network traffic received, per second, over the last minute (in bytes)</td></tr></tbody></table><p>More information on the use of <code>node-exporter</code> metrics is available at https://github.com/prometheus/node_exporter.</p><h2 id="cadvisor"><a href="#cadvisor" aria-hidden="true" class="header-anchor">#</a> cAdvisor</h2><p>cAdvisor is an open source container resource usage and performance analysis agent. It is purpose-built for containers and supports Docker containers natively. In Kubernetes, cAdvisor is integrated into the Kubelet binary. cAdvisor auto-discovers all containers in the machine and collects CPU, memory, filesystem, and network usage statistics. cAdvisor also provides the overall machine usage by analyzing the ‘root’ container on the machine.</p><p>Kubelet exposes a simple cAdvisor UI for containers on a machine, via the default port 4194. However, this feature has been marked deprecated in v1.10 and completely removed in v1.12. For more inforation on how upcoming releases will reduce the set of metrics exposed by the kubelet, see the relevant issue page at https://github.com/kubernetes/kubernetes/issues/68522.</p><p>The Kubelet also starts an internal HTTP server on port <code>10255</code> and exposes endpoints including  <code>/metrics</code> and  <code>/metrics/cadvisor</code>. As this release of Express Containers uses Kubernetes 1.11, it is able to use this feature.</p><p>In future releases, it will be necessary to deploy cAdvisor as a DaemonSet for access to the cAdvisor UI.</p><p>The table below lists some example expressions using cAdvisor metrics.</p><table><thead><tr><th>Expression</th><th>Description</th><th>For</th></tr></thead><tbody><tr><td>rate(container_cpu_usage_seconds_total{name=&quot;redis&quot;}[1m])</td><td>The cgroup's CPU usage in the last minute (split up by core)</td><td>The <code>redis</code> container</td></tr><tr><td>container_memory_usage_bytes{name=&quot;redis&quot;}</td><td>The cgroup's total memory usage (in bytes)</td><td>The redis container</td></tr><tr><td>rate(container_network_transmit_bytes_total[1m])</td><td>Bytes transmitted over the network by the container per second in the last minute</td><td>All containers</td></tr><tr><td>rate(container_network_receive_bytes_total[1m])</td><td>Bytes received over the network by the container per second in the last minute</td><td>All containers</td></tr></tbody></table><p>A full listing of cAdvisor-gathered container metrics exposed to Prometheus can be found in the cAdvisor documentation at https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md.</p></div><div class="content edit-link"><a href="https://github.com/HewlettPackard/Docker-Synergy/edit/devel/docs-src/promgraf-k8s/promgraf-k8s-prometheus.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-playbooks.html" class="prev">
          Playbooks for installing Prometheus and Grafana on Kubernetes
        </a></span><span class="next"><a href="/Docker-Synergy/promgraf-k8s/promgraf-k8s-grafana.html">
          Grafana UI
        </a> →
      </span></p></div></div></div></div>
    <script src="/Docker-Synergy/assets/js/app.60b2dfba.js" defer></script><script src="/Docker-Synergy/assets/js/6.0fa2c4ad.js" defer></script>
  </body>
</html>
