<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE Enterprise Containers | Create the Red Hat Linux template</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-Synergy/assets/css/styles.825f9daf.css" as="style"><link rel="preload" href="/Docker-Synergy/assets/js/app.825f9daf.js" as="script"><link rel="preload" href="/Docker-Synergy/assets/js/80.bb1a26ad.js" as="script"><link rel="prefetch" href="/Docker-Synergy/assets/js/1.33cdb208.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/10.d91aa632.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/100.2fb5ed1c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/101.4104e273.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/102.6d476a9d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/103.059926f0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/104.49392ffc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/105.e2dbb2c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/106.78263336.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/107.5167ac52.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/108.c1f8f9b3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/109.cc172db9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/11.1a1be263.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/110.f58884bf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/12.52898f73.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/13.db01312c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/14.e8801772.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/15.42606cf6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/16.0b7f0ec6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/17.7cff90e4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/18.a1f25210.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/19.b35e2c6f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/2.6ac469fe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/20.cbcb9844.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/21.0dc0d3a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/22.74a9265c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/23.26bc3b88.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/24.06c21710.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/25.a23bb2c9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/26.d5850bbe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/27.1d9a3c77.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/28.10058414.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/29.1c5b4094.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/3.a9c8c7ff.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/30.b89966bd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/31.5a0fccca.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/32.f493cc7e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/33.a90f075d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/34.c07ad168.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/35.b32660de.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/36.3beef1a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/37.7d64f535.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/38.c26521f2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/39.de619b60.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/4.0a39251f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/40.fab8b25a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/41.1dc75695.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/42.44a3fd0b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/43.2868578d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/44.abe5797d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/45.e6207447.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/46.862c9673.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/47.1b576b13.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/48.6c9bbb71.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/49.8d30cb48.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/5.b7000270.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/50.3157f08a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/51.7f7fe668.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/52.78f6c5d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/53.a9c89c66.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/54.2b568960.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/55.cde6a808.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/56.9ec3b4c8.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/57.7d9eded5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/58.9a42004a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/59.88d7c968.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/6.109e5f46.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/60.daf0136b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/61.f0dc9a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/62.6ea39c03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/63.4337c6c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/64.a921e428.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/65.1c841a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/66.58ebe132.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/67.f29cf8d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/68.acd206f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/69.383930d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/7.7bd23360.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/70.45403cd6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/71.a432d10f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/72.d4f2afbd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/73.d274e0a1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/74.f75d0200.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/75.b17a5590.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/76.9f3ed50d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/77.54fd5288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/78.078490e1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/79.dbd1a018.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/8.ca168b03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/81.1229097c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/82.8b443914.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/83.7056d943.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/84.e417bea6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/85.bfae842f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/86.729ca71d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/87.beb12ad9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/88.9bb01898.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/89.652dd288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/9.f79054e9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/90.5ebc031e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/91.52414f81.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/92.613ac1f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/93.f99166af.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/94.e8d066ab.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/95.5f63eff7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/96.bbd6c9ea.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/97.bb9121d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/98.1945fb28.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/99.80be1fc1.js">
    <link rel="stylesheet" href="/Docker-Synergy/assets/css/styles.825f9daf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Docker-Synergy/" class="home-link router-link-active"><!----><span class="site-name">
      HPE Enterprise Containers
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Preparing the environment</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Docker-Synergy/prep/verify-prereqs.html" class="sidebar-link">Verify prerequisites</a></li><li><a href="/Docker-Synergy/prep/vsphere-ha.html" class="sidebar-link">Enable vSphere High Availability (HA)</a></li><li><a href="/Docker-Synergy/prep/install-vdvs.html" class="sidebar-link">Install vSphere Docker Volume Service driver on all ESXi hosts</a></li><li><a href="/Docker-Synergy/prep/create-ansible-node-fedora.html" class="sidebar-link">Create the Ansible node on Fedora</a></li><li><a href="/Docker-Synergy/prep/create-rhel-template.html" class="active sidebar-link">Create the Red Hat Linux template</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docker-Synergy/prep/create-rhel-template.html#update-packages" class="sidebar-link">Update packages</a></li><li class="sidebar-sub-header"><a href="/Docker-Synergy/prep/create-rhel-template.html#finalize-the-template" class="sidebar-link">Finalize the template</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring the core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring Storage</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Windows VM workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying bare metal workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Kubernetes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker Swarm</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Backup and restore</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="create-the-red-hat-linux-template"><a href="#create-the-red-hat-linux-template" aria-hidden="true" class="header-anchor">#</a> Create the Red Hat Linux template</h1><p>To create the Red Hat Linux VM template that you will use as the base for all your nodes, you first create a Virtual Machine with the OS installed and then convert the Virtual Machine to a VM Template. The VM Template is created as lean as possible, with any additional software installs and/or system configuration performed subsequently using Ansible.</p><p>As the creation of the template is a one-off task, this procedure has not been automated. The steps required to manually create a VM template are outlined below.</p><p>Log in to vCenter and create a new Virtual Machine with the following characteristics:</p><ul><li>Guest OS Family: Linux, Guest OS Version: Red Hat Enterprise Linux (64-bit)</li><li>Hard Disk size: 50GB, (Thin provisioning)</li><li>A single network controller connected to the network or VLAN of your choice. All VMs will connect to this same network.</li><li>Optionally you can remove the floppy drive</li></ul><p>Install Red Hat Enterprise 7:</p><ol><li>Select a language which is supported by Docker</li><li>For the software selection, choose <strong>Infrastructure Server</strong> as the base environment and add the <strong>Guest Agents</strong> from the lists of add-ons available for this environment. The Infrastructure Server environment is selected here versus the Minimal Install because customization of Linux guest operating systems requires that Perl is installed in the Linux guest operating system.</li><li>Configure the network settings so that you can later access the VM using SSH. Specify an IP address for the network interface, a default gateway, DNS settings and possibly any HTTP/HTTPS proxies that apply in your environment.</li><li>Specify a password for the root account and optionally created an admin user.</li><li>Wait for the installation to finish and for the VM to reboot.</li></ol><h2 id="update-packages"><a href="#update-packages" aria-hidden="true" class="header-anchor">#</a> Update packages</h2><p>Use <code>yum update</code> to install the latest packages, configuring a proxy if required.</p><pre class="language-text"><code># subscription-manager config --server.proxy_hostname=&lt;proxy IP&gt; --server.proxy_port=&lt;proxy port&gt;

# subscription-manager register  --auto-attach

# subscription-manager repos \
--enable=rhel-7-server-rpms \
--enable=rhel-7-server-extras-rpms

# yum update

# subscription-manager unregister
</code></pre><h2 id="finalize-the-template"><a href="#finalize-the-template" aria-hidden="true" class="header-anchor">#</a> Finalize the template</h2><p>Log in to the <code>root</code> account on the Ansible box and copy the SSH public key to the VM Template. This will allow your Ansible node to SSH to all the Virtual Machines created from the VM Template without the need for a password.</p><pre class="language-text"><code>ssh-copy-id root@&lt;IP of your VM_Template&gt;
</code></pre><p>Perform the following steps on the VM Template to finalize its creation:</p><ol><li><p>Clean up the template by running the following commands from the <strong>Virtual Machine Console:</strong></p><pre class="language-text"><code>
# rm /etc/ssh/ssh_host_*
# nmcli con del ens192
# logrotate -f /etc/logrotate.conf
# rm /var/log/*-201?*
# history -c		

</code></pre></li><li><p>Shutdown the VM</p><pre class="language-text"><code># shutdown -h now
</code></pre></li><li><p>Turn the VM into a template by right-clicking on your VM and selecting <code>Template -&gt; Convert to Template</code>. This will create a new template visible under VM Templates in Folders, ready for future use.</p></li></ol><p><strong>Note:</strong> In both the Ansible node and the VM Template, you might need to configure the network so one node can reach the other. Instructions for this step have been omitted since it is a basic step and could vary depending on the user’s environment.</p></div><div class="content edit-link"><a href="https://github.com/HewlettPackard/Docker-Synergy/edit/devel/docs-src/prep/create-rhel-template.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Docker-Synergy/prep/create-ansible-node-fedora.html" class="prev">
          Create the Ansible node on Fedora
        </a></span><span class="next"><a href="/Docker-Synergy/config-core/ansible-config.html">
          Ansible configuration
        </a> →
      </span></p></div></div></div></div>
    <script src="/Docker-Synergy/assets/js/app.825f9daf.js" defer></script><script src="/Docker-Synergy/assets/js/80.bb1a26ad.js" defer></script>
  </body>
</html>
