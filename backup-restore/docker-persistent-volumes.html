<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE Enterprise Containers | Backup and restore Docker persistent volumes </title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-Synergy/assets/css/styles.825f9daf.css" as="style"><link rel="preload" href="/Docker-Synergy/assets/js/app.825f9daf.js" as="script"><link rel="preload" href="/Docker-Synergy/assets/js/5.b7000270.js" as="script"><link rel="prefetch" href="/Docker-Synergy/assets/js/1.33cdb208.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/10.d91aa632.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/100.2fb5ed1c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/101.4104e273.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/102.6d476a9d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/103.059926f0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/104.49392ffc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/105.e2dbb2c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/106.78263336.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/107.5167ac52.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/108.c1f8f9b3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/109.cc172db9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/11.1a1be263.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/110.f58884bf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/12.52898f73.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/13.db01312c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/14.e8801772.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/15.42606cf6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/16.0b7f0ec6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/17.7cff90e4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/18.a1f25210.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/19.b35e2c6f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/2.6ac469fe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/20.cbcb9844.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/21.0dc0d3a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/22.74a9265c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/23.26bc3b88.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/24.06c21710.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/25.a23bb2c9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/26.d5850bbe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/27.1d9a3c77.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/28.10058414.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/29.1c5b4094.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/3.a9c8c7ff.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/30.b89966bd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/31.5a0fccca.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/32.f493cc7e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/33.a90f075d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/34.c07ad168.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/35.b32660de.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/36.3beef1a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/37.7d64f535.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/38.c26521f2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/39.de619b60.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/4.0a39251f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/40.fab8b25a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/41.1dc75695.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/42.44a3fd0b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/43.2868578d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/44.abe5797d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/45.e6207447.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/46.862c9673.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/47.1b576b13.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/48.6c9bbb71.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/49.8d30cb48.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/50.3157f08a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/51.7f7fe668.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/52.78f6c5d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/53.a9c89c66.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/54.2b568960.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/55.cde6a808.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/56.9ec3b4c8.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/57.7d9eded5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/58.9a42004a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/59.88d7c968.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/6.109e5f46.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/60.daf0136b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/61.f0dc9a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/62.6ea39c03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/63.4337c6c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/64.a921e428.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/65.1c841a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/66.58ebe132.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/67.f29cf8d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/68.acd206f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/69.383930d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/7.7bd23360.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/70.45403cd6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/71.a432d10f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/72.d4f2afbd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/73.d274e0a1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/74.f75d0200.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/75.b17a5590.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/76.9f3ed50d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/77.54fd5288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/78.078490e1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/79.dbd1a018.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/8.ca168b03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/80.bb1a26ad.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/81.1229097c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/82.8b443914.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/83.7056d943.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/84.e417bea6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/85.bfae842f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/86.729ca71d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/87.beb12ad9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/88.9bb01898.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/89.652dd288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/9.f79054e9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/90.5ebc031e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/91.52414f81.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/92.613ac1f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/93.f99166af.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/94.e8d066ab.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/95.5f63eff7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/96.bbd6c9ea.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/97.bb9121d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/98.1945fb28.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/99.80be1fc1.js">
    <link rel="stylesheet" href="/Docker-Synergy/assets/css/styles.825f9daf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Docker-Synergy/" class="home-link router-link-active"><!----><span class="site-name">
      HPE Enterprise Containers
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preparing the environment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring the core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring Storage</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Windows VM workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying bare metal workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Kubernetes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker Swarm</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Backup and restore</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Docker-Synergy/backup-restore/backup-restore.html" class="sidebar-link">Introduction to backup and restore</a></li><li><a href="/Docker-Synergy/backup-restore/backup-ucp-dtr.html" class="sidebar-link">Backup UCP and DTR</a></li><li><a href="/Docker-Synergy/backup-restore/restore-ucp-dtr.html" class="sidebar-link">Restoring your cluster after a disaster</a></li><li><a href="/Docker-Synergy/backup-restore/docker-persistent-volumes.html" class="active sidebar-link">Backup and restore Docker persistent volumes </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docker-Synergy/backup-restore/docker-persistent-volumes.html#persistent-storage-backup-solution" class="sidebar-link">Persistent storage backup solution</a></li><li class="sidebar-sub-header"><a href="/Docker-Synergy/backup-restore/docker-persistent-volumes.html#snapshot-and-back-up-hpe-3par-virtual-volumes-with-hpe-recovery-manager-central-and-hpe-storeonce" class="sidebar-link">Snapshot and back up HPE 3PAR Virtual Volumes with HPE Recovery Manager Central and HPE StoreOnce</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="backup-and-restore-docker-persistent-volumes"><a href="#backup-and-restore-docker-persistent-volumes" aria-hidden="true" class="header-anchor">#</a> Backup and restore Docker persistent volumes</h1><p>There are a number of prerequisites that must be fulfilled before you backup and restore your Docker persistent volumes.</p><ul><li>VSphere clusters should have access to a datastore specifically for backups. This is a separate Virtual Volume created on the HPE 3PAR StoreServ and presented to all the hosts in the vSphere cluster.</li><li>Backup software must be available. HPE Recovery Manager Central and HPE 3PAR StoreServ is recommended but other customer backup and restore solutions are acceptable.</li></ul><p>A number of restrictions also apply:</p><ul><li>Volumes may not be in use when a volume is cloned. Any container that has the volume attached must be paused prior to creating the clone. The container can be resumed once the clone is complete.</li><li>When Docker volumes need to be restored from backup, the backup datastore needs to be detached from all vSphere cluster servers prior to restoration.</li></ul><h2 id="persistent-storage-backup-solution"><a href="#persistent-storage-backup-solution" aria-hidden="true" class="header-anchor">#</a> Persistent storage backup solution</h2><h3 id="creating-the-volume"><a href="#creating-the-volume" aria-hidden="true" class="header-anchor">#</a> Creating the volume</h3><p>Docker persistent volumes can be created from a worker node using the following command:</p><pre class="language-text"><code>docker volume create --driver=vsphere --name=MyVolume@MyDatastore -o size=10gb 
</code></pre><h3 id="cloning-the-volume"><a href="#cloning-the-volume" aria-hidden="true" class="header-anchor">#</a> Cloning the volume</h3><p><strong>Note:</strong> Prior to creating a clone of a volume, any containers accessing the volume should be paused or stopped.</p><p>Docker volumes can be cloned to a new datastore:</p><pre class="language-text"><code>docker volume create --driver=vsphere --name=CloneVolumme@DockerBackup -o clone-from=MyVolume@MyDatastore -o access=read-only 
</code></pre><h2 id="snapshot-and-back-up-hpe-3par-virtual-volumes-with-hpe-recovery-manager-central-and-hpe-storeonce"><a href="#snapshot-and-back-up-hpe-3par-virtual-volumes-with-hpe-recovery-manager-central-and-hpe-storeonce" aria-hidden="true" class="header-anchor">#</a> Snapshot and back up HPE 3PAR Virtual Volumes with HPE Recovery Manager Central and HPE StoreOnce</h2><p>HPE Recovery Manager Central (RMC) software integrates HPE 3PAR StoreServ All-Flash arrays with HPE StoreOnce Systems to leverage the performance of snapshots with the protection of backups. RMC uses a direct backup model to orchestrate data protection between the array and the backup system without a backup application. When the first full backup is complete, each subsequent backup is incremental, making it significantly faster than traditional backup methods, particularly for higher volumes of data. Backups to HPE StoreOnce are block-level copies of volumes, de-duplicated to save space. Because RMC snapshots are self-contained, fully independent volumes, they can be restored to any HPE 3PAR array in the event of a disaster. See the figure below for an overview of the architecture.</p><p>HPE Recovery Manager Central enables you to replicate data from the source storage system (HPE 3PAR StoreServ) to the destination storage system (HPE StoreOnce). The replication is based on point-in-time snapshots.
HPE Recovery Manager Central is installed as a VM on VMware vSphere ESXi. It can be installed on the HPE Synergy platform on a separate (from the Docker Solution) vSphere cluster or external to the Synergy environment as long as the external server has connectivity to the HPE 3PAR StoreServ and HPE StoreOnce. HPE RMC can be installed directly on an ESXi host or can be deployed to a VMware vCenter managed environment. For this solution, the standalone &quot;RMC only&quot; is installed. If HPE RMC is installed in the HPE Synergy environment, iSCSI connection to the HPE 3PAR StoreServ is required.</p><p><img src="/Docker-Synergy/assets/img/rmc-storeonce.ffa248a5.png" alt=" "HPE Recovery Manger Central and HPE StoreOnce""></p><p><strong>Figure.</strong> HPE Recovery Manger Central and HPE StoreOnce</p><ul><li>The connectivity between HPE 3PAR StoreServ and HPE RMC for data traffic is over iSCSI.</li><li>The connectivity between HPE StoreOnce and HPE RMC is over CoEthernet (Catalyst OverEthernet)</li><li>The connectivity between HPE RMC, HPE 3PAR StoreServ, and HPE StoreOnce for management traffic is over IP.</li></ul><p>The following figure illustrates the connectivity between various components.</p><p><img src="/Docker-Synergy/assets/img/3par-storeonce-networking.228751c4.png" alt=" "Connectivity""></p><p><strong>Figure.</strong> Connectivity</p><h1 id="integrate-ucp-and-dtr-backup-with-hpe-rmc-and-hpe-storeonce"><a href="#integrate-ucp-and-dtr-backup-with-hpe-rmc-and-hpe-storeonce" aria-hidden="true" class="header-anchor">#</a> Integrate UCP and DTR backup with HPE RMC and HPE StoreOnce</h1><p>You can take advantage of HPE Recovery Manager Central and HPE StoreOnce to provide scheduled snapshots and backup protection for the data generated by the backup procedure for Docker UCP and DTR.</p><ol><li><p>Create a datastore from the Backup virtual volume you created and present it to all hosts in the
vSphere cluster. This backup datastore is used for storing copies of Docker persistent volumes as
well as backups of DTR and UCP.</p></li><li><p>The Ansible server is used to create backup and restore files for DTR and UCP on the local hard drive.
The backup files should be copied to the DockerBackup datastore which can be automatically configured
for snapshots and offsite backup.</p></li><li><p>Edit the Ansible server configuration from vCenter. Add a new hard disk and specify the location
as the Docker Backup datastore as shown in the following figure.</p><p><img src="/Docker-Synergy/assets/img/add-new-disk.081465d5.png" alt=" "Add new hard disk""></p><p><strong>Figure.</strong> Add new hard disk</p></li><li><p>After the hard disk is added, it is visible from the Linux operating system. From the Ansible server:</p></li></ol><pre class="language-text"><code># ls /dev/sd*
</code></pre><ol start="5"><li>The newly added storage should appear as /dev/sdb. Now, make a filesystem, ignoring any warnings:</li></ol><pre class="language-text"><code># mkfs -t ext4 /dev/sdb 
</code></pre><ol start="6"><li>Create a mount point for the new disk:</li></ol><pre class="language-text"><code># mkdir /dockerbackup
</code></pre><ol start="7"><li>Edit the /etc/fstab file and add the following line:</li></ol><pre class="language-text"><code>/dev/sdb /dockerbackup ext4 defaults 0  0
</code></pre><ol start="8"><li>After saving the change, mount the new volume using:</li></ol><pre class="language-text"><code>#mount -a
</code></pre><p>Each time you backup Docker UCP and DTR using the <code>backup.sh</code> script, you should copy the generated files from the <code>/root/backups</code> folder to <code>/dockerbackup</code>. You may wish to add a command to the backup script to automate this process.
The virtual volume used to host the <code>DockerBackup</code> datastore can be scheduled for snapshot and backup protection with HPE Recovery Manager Central and HPE StoreOnce as described in the section <code>Backup and restore Docker persistent volumes</code>. Data backed up to HPE StoreOnce can be restored to the HPE 3PAR StoreServ and attached to the Ansible host for recovery.</p></div><div class="content edit-link"><a href="https://github.com/HewlettPackard/Docker-Synergy/edit/devel/docs-src/backup-restore/docker-persistent-volumes.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Docker-Synergy/backup-restore/restore-ucp-dtr.html" class="prev">
          Restoring your cluster after a disaster
        </a></span><span class="next"><a href="/Docker-Synergy/lifecycle/lifecycle.html">
          Introduction to solution lifecycle management
        </a> →
      </span></p></div></div></div></div>
    <script src="/Docker-Synergy/assets/js/app.825f9daf.js" defer></script><script src="/Docker-Synergy/assets/js/5.b7000270.js" defer></script>
  </body>
</html>
