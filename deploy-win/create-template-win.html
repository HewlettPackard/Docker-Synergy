<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE Enterprise Containers | Create the Windows VM Template</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-Synergy/assets/css/styles.ee35edd7.css" as="style"><link rel="preload" href="/Docker-Synergy/assets/js/app.ee35edd7.js" as="script"><link rel="preload" href="/Docker-Synergy/assets/js/50.7fc22e38.js" as="script"><link rel="prefetch" href="/Docker-Synergy/assets/js/1.a662ab65.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/10.4c39bd31.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/100.9d3cb3ad.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/101.81e80351.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/102.8ff87bc4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/103.4288d928.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/104.1669c1ef.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/105.8deecb28.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/106.374e7d8b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/107.77a72feb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/108.f1692157.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/109.2157b8bc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/11.142bdd5e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/12.3d1bb336.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/13.eaf1f5e5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/14.67eeb52a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/15.e4ed7cbf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/16.03b8c558.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/17.098005a1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/18.add49489.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/19.7f2463e0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/2.912071f3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/20.f8e81d75.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/21.aad9ccee.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/22.d4ee645e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/23.96df0793.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/24.7686224b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/25.69ba7ead.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/26.565cf8a7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/27.c5be63e7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/28.c806398a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/29.2f0c780b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/3.6149c576.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/30.eacad12f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/31.33e9d24d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/32.5114e800.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/33.a56f58e4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/34.69c22b24.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/35.7d24a516.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/36.7024c48b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/37.86830470.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/38.ee4ad1bb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/39.fd6edc3e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/4.bfc6fbcc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/40.74edb01b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/41.f54305c5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/42.4ad275c5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/43.6a0e46a5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/44.72bcc252.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/45.336c7970.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/46.8f792805.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/47.27bc75e5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/48.9d6aa0a0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/49.a1ec324b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/5.375b34aa.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/51.3d21e3ea.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/52.bad378fc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/53.e834cb39.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/54.8c4ff143.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/55.b8b3aaf5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/56.78d8c152.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/57.ac385698.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/58.aad9a945.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/59.e3b3276b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/6.29c1dc8f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/60.51804c36.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/61.4b2c334b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/62.635070da.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/63.d4315fdb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/64.372fe538.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/65.a4e0c96c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/66.5fb73d9e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/67.050ab3d1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/68.673c8830.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/69.995d23bf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/7.4ec2e9eb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/70.c05b6e4b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/71.425ae41e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/72.6c491f7e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/73.8b6fd98b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/74.dad74952.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/75.ad9ac462.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/76.4a5a2098.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/77.e6b51805.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/78.35e850e7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/79.41fdca01.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/8.9cf28a27.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/80.f86e2e3a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/81.d9320f6a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/82.f06c6016.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/83.13318e32.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/84.18ee5824.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/85.4994a054.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/86.2c52be61.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/87.5993fe46.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/88.3e4b0be6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/89.7a6acd88.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/9.7bba5a1f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/90.fc0dbb0d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/91.bdf72ea4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/92.dfd1068f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/93.ee44fdde.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/94.f0b0eaeb.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/95.00be522d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/96.d2629d4c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/97.0ffeca6a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/98.338419ab.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/99.94dba671.js">
    <link rel="stylesheet" href="/Docker-Synergy/assets/css/styles.ee35edd7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Docker-Synergy/" class="home-link router-link-active"><!----><span class="site-name">
      HPE Enterprise Containers
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preparing the environment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring the core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring Storage</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Deploying Windows VM workers</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Docker-Synergy/deploy-win/deploying-windows-workers.html" class="sidebar-link">Introduction to deploying Windows VM workers</a></li><li><a href="/Docker-Synergy/deploy-win/create-template-win.html" class="active sidebar-link">Create the Windows VM Template</a></li><li><a href="/Docker-Synergy/deploy-win/add-windows-workers.html" class="sidebar-link">Playbooks for adding Windows VM workers</a></li><li><a href="/Docker-Synergy/deploy-win/windows-config.html" class="sidebar-link">Windows configuration</a></li><li><a href="/Docker-Synergy/deploy-win/windows-proxy-fedora.html" class="sidebar-link">Deploying Windows workers behind a proxy</a></li><li><a href="/Docker-Synergy/deploy-win/lifecycle-windows.html" class="sidebar-link">Windows operating system and Docker EE</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying bare metal workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Kubernetes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker Swarm</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Backup and restore</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="create-the-windows-vm-template"><a href="#create-the-windows-vm-template" aria-hidden="true" class="header-anchor">#</a> Create the Windows VM Template</h1><p>To create the Windows VM Template that you will use as the base for all your Windows worker nodes, you will first create a Virtual Machine with the OS installed and then convert the Virtual Machine to a VM Template. The VM Template is created as lean as possible, with any additional software installs and/or system configuration performed subsequently using Ansible.</p><p>As the creation of the template is a one-off task, this procedure has not been automated. The steps to create a VM template manually are outlined below.</p><p>Log in to vCenter and create a new Virtual Machine with the following characteristics:</p><ul><li>Guest OS Family: Windows, Guest OS Version: Microsoft Windows Server 2016 (64-bit).</li><li>Hard Disk size: 100GB (Thin provisioning), 1 vCPU and 4 GB of RAM. Both vCPU and memory can be altered later after you deploy from this template.</li><li>A single network controller connected to the network or VLAN of your choice. All VMs will connect to this same network.</li><li>Change the network type to VMXNET3, and attach the Windows Server 2016 ISO image from a datastore ensuring you connect the CD/DVD drive on boot.</li><li>Click on the <code>VM Options</code> tab, and in the <code>Boot Options</code> section, select <code>Force BIOS setup(*)</code> to ensure that the machine enters the BIOS setup screen on next boot of this VM. This will allow you to adjust the boot order, placing the virtual CD-ROM in front of your hard drive.</li><li>Optionally you can remove the floppy drive.</li></ul><p>Install Windows Server 2016:</p><ul><li>Power on the selected VM and then <code>Open Console</code>.</li><li>Once connected to the console, you will be placed in the BIOS setup screen. Select the <code>Boot</code> tab, click on CD-ROM Drive and move up the CD-ROM drive above the hard drive. This allows your Windows Server 2016 ISO image to be loaded first on boot. Save your changes and exit.</li><li>Enter your choices for Language, Time/Currency Format, Keyboard and then select <code>Install Now</code>.</li><li>Select the OS you want to install, and then select <code>Custom: Install Windows Only</code>.</li><li>Select drive 0, the 100 GB drive you specified earlier, as the location for installing windows.</li><li>Add a password for the Administrator user.</li><li>Install VMware Tools and reboot.</li></ul><p>Once the VM has re-booted:</p><ul><li>Add a temporary network IP address and configure any proxy settings required to download Windows Updates.</li><li>Use the <code>sconfig</code> utility from (MS-DOS) command line to install Windows Updates and enable Remote Desktop.</li><li>Perform any other customizations you require at this point.</li></ul><p>Prior to converting the VM to Template, run Sysprep: <code>C:\Windows\System32\Sysprep\Sysprep.exe</code>.</p><ul><li>Ensure ‘System Out-of-Box Experience (OOBE)’ is selected.</li><li>Select the ‘Generalize’ option.</li><li>Select ‘Shutdown’ from the Shutdown Options.</li></ul><p>Shutdown the VM, and untick <code>Connect CD/DVD</code> so that the Windows Server 2016 ISO is no longer mounted. Boot the Windows VM one final time and enter regional settings applicable to your location and keyboard mapping, enter an Administrator user password then Shutdown VM.</p><p><strong>Note:</strong> The <code>vmware_guest</code> module used by the playbooks will generate a new SID.</p><p>Turn the VM into a template by right-clicking on your VM and selecting <code>Template -&gt; Convert to Template</code>. This will create a new template visible under VM Templates in Folders, ready for future use.</p></div><div class="content edit-link"><a href="https://github.com/HewlettPackard/Docker-Synergy/edit/devel/docs-src/deploy-win/create-template-win.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Docker-Synergy/deploy-win/deploying-windows-workers.html" class="prev">
          Introduction to deploying Windows VM workers
        </a></span><span class="next"><a href="/Docker-Synergy/deploy-win/add-windows-workers.html">
          Playbooks for adding Windows VM workers
        </a> →
      </span></p></div></div></div></div>
    <script src="/Docker-Synergy/assets/js/app.ee35edd7.js" defer></script><script src="/Docker-Synergy/assets/js/50.7fc22e38.js" defer></script>
  </body>
</html>
