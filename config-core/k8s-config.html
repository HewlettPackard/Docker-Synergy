<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HPE Enterprise Containers | Kubernetes configuration</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Docker-Synergy/assets/css/styles.825f9daf.css" as="style"><link rel="preload" href="/Docker-Synergy/assets/js/app.825f9daf.js" as="script"><link rel="preload" href="/Docker-Synergy/assets/js/44.abe5797d.js" as="script"><link rel="prefetch" href="/Docker-Synergy/assets/js/1.33cdb208.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/10.d91aa632.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/100.2fb5ed1c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/101.4104e273.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/102.6d476a9d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/103.059926f0.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/104.49392ffc.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/105.e2dbb2c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/106.78263336.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/107.5167ac52.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/108.c1f8f9b3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/109.cc172db9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/11.1a1be263.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/110.f58884bf.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/12.52898f73.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/13.db01312c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/14.e8801772.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/15.42606cf6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/16.0b7f0ec6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/17.7cff90e4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/18.a1f25210.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/19.b35e2c6f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/2.6ac469fe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/20.cbcb9844.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/21.0dc0d3a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/22.74a9265c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/23.26bc3b88.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/24.06c21710.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/25.a23bb2c9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/26.d5850bbe.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/27.1d9a3c77.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/28.10058414.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/29.1c5b4094.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/3.a9c8c7ff.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/30.b89966bd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/31.5a0fccca.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/32.f493cc7e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/33.a90f075d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/34.c07ad168.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/35.b32660de.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/36.3beef1a4.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/37.7d64f535.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/38.c26521f2.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/39.de619b60.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/4.0a39251f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/40.fab8b25a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/41.1dc75695.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/42.44a3fd0b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/43.2868578d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/45.e6207447.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/46.862c9673.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/47.1b576b13.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/48.6c9bbb71.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/49.8d30cb48.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/5.b7000270.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/50.3157f08a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/51.7f7fe668.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/52.78f6c5d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/53.a9c89c66.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/54.2b568960.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/55.cde6a808.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/56.9ec3b4c8.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/57.7d9eded5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/58.9a42004a.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/59.88d7c968.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/6.109e5f46.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/60.daf0136b.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/61.f0dc9a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/62.6ea39c03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/63.4337c6c3.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/64.a921e428.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/65.1c841a37.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/66.58ebe132.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/67.f29cf8d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/68.acd206f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/69.383930d5.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/7.7bd23360.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/70.45403cd6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/71.a432d10f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/72.d4f2afbd.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/73.d274e0a1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/74.f75d0200.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/75.b17a5590.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/76.9f3ed50d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/77.54fd5288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/78.078490e1.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/79.dbd1a018.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/8.ca168b03.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/80.bb1a26ad.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/81.1229097c.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/82.8b443914.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/83.7056d943.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/84.e417bea6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/85.bfae842f.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/86.729ca71d.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/87.beb12ad9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/88.9bb01898.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/89.652dd288.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/9.f79054e9.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/90.5ebc031e.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/91.52414f81.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/92.613ac1f7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/93.f99166af.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/94.e8d066ab.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/95.5f63eff7.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/96.bbd6c9ea.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/97.bb9121d6.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/98.1945fb28.js"><link rel="prefetch" href="/Docker-Synergy/assets/js/99.80be1fc1.js">
    <link rel="stylesheet" href="/Docker-Synergy/assets/css/styles.825f9daf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Docker-Synergy/" class="home-link router-link-active"><!----><span class="site-name">
      HPE Enterprise Containers
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Docker-Synergy/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Docker-Synergy/blog/" class="nav-link">Blog</a></div><a href="https://github.com/HewlettPackard/Docker-Synergy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release notes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preparing the environment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Configuring the core components</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Docker-Synergy/config-core/ansible-config.html" class="sidebar-link">Ansible configuration</a></li><li><a href="/Docker-Synergy/config-core/edit-inventory.html" class="sidebar-link">Editing the inventory</a></li><li><a href="/Docker-Synergy/config-core/vmware-config.html" class="sidebar-link">VMware configuration</a></li><li><a href="/Docker-Synergy/config-core/network-config.html" class="sidebar-link">Networking configuration</a></li><li><a href="/Docker-Synergy/config-core/environment-config.html" class="sidebar-link">Environment configuration</a></li><li><a href="/Docker-Synergy/config-core/docker-config.html" class="sidebar-link">Docker configuration</a></li><li><a href="/Docker-Synergy/config-core/orchestrator-config.html" class="sidebar-link">Orchestrator configuration</a></li><li><a href="/Docker-Synergy/config-core/k8s-config.html" class="active sidebar-link">Kubernetes configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docker-Synergy/config-core/k8s-config.html#kubernetes-persistent-volume-configuration" class="sidebar-link">Kubernetes Persistent Volume configuration</a></li></ul></li><li><a href="/Docker-Synergy/config-core/edit-vault.html" class="sidebar-link">Protecting sensitive information</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Overview of the playbooks</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying core components</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Post deployment</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Configuring Storage</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Windows VM workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying bare metal workers</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Sysdig monitoring</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Splunk</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Kubernetes</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Deploying Prometheus and Grafana on Docker Swarm</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Backup and restore</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Solution lifecycle management</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="kubernetes-configuration"><a href="#kubernetes-configuration" aria-hidden="true" class="header-anchor">#</a> Kubernetes configuration</h1><p>The current playbooks support the deployment of UCP 3.1.* which deploys Kubernetes version 1.11.*. This version of the playbooks will not work with a version of UCP lower than version 3. If you wish to deploy using UCP 2.*, you will need to download an earlier release of the playbooks, which are available on the GitHub site.</p><p>The preceding section explains how to assign a worker node to the Kubernetes orchestrator. This sections covers specific Kubernetes configuration, including how to set the pod CIDR and how to configure Kubernetes Persistent Volumes.</p><h3 id="pod-cidr"><a href="#pod-cidr" aria-hidden="true" class="header-anchor">#</a> Pod CIDR</h3><p>The variable <code>k8s_pod_cidr</code> is specified in <code>group_vars/all/vars</code> and configures a custom range of IP addresses to be used by pods. The specific range you use should be dedicated to the cluster.</p><p>The default value is <code>192.168.0.0/16</code>. To set an alternative value, use the variable as shown in the example:</p><pre class="language-text"><code>    k8s_pod_cidr: 192.168.128.0/17
</code></pre><h2 id="kubernetes-persistent-volume-configuration"><a href="#kubernetes-persistent-volume-configuration" aria-hidden="true" class="header-anchor">#</a> Kubernetes Persistent Volume configuration</h2><p>Variables related to the configuration of Kubernetes Persistent Volumes are shown in the following table.</p><table><thead><tr><th style="text-align:left">Variable</th><th style="text-align:left">File</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">nfs_provisioner_namespace</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">The Kubernetes namespace, for example, <code>nfsstorage</code></td></tr><tr><td style="text-align:left">nfs_provisioner_role</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">Name of the role to create, for example, <code>nfs-provisioner-runner</code>.</td></tr><tr><td style="text-align:left">nfs_provisioner_serviceaccount</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">The Kubernetes service account name to use for RBAC purposes, for example, <code>nfs-provisioner</code></td></tr><tr><td style="text-align:left">nfs_provisioner_name</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">Name of the provisioner, for example, <code>hpe.com/nfs</code></td></tr><tr><td style="text-align:left">nfs_provisioner_storage_class_name</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">Name of the storage class to create, for example, <code>nfs</code></td></tr><tr><td style="text-align:left">nfs_provisioner_server_ip</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">IP address (or FQDN) of your external NFS server, for example, <code>hpe2-nfs.am2.cloudra.local</code></td></tr><tr><td style="text-align:left">nfs_provisioner_server_share</td><td style="text-align:left">group_vars/all/vars</td><td style="text-align:left">Name of the NFS share where all the persistent volume data will be stored, for example, <code>/k8s</code></td></tr></tbody></table><h3 id="related-playbooks"><a href="#related-playbooks" aria-hidden="true" class="header-anchor">#</a> Related playbooks</h3><ul><li><code>playbooks/nfs-provisioner.yml</code> is used to enable a dynamic NFS provisioner which can be used to automatically create and allocate Kubernetes persistent volumes. The backend storage is provided by an NFS backend. This playbook is run from the Ansible box after configuring <code>kubectl</code> and a UCP client bundle for the <code>admin</code> account. For more information on using this playbook, see the section <code>Deploying the NFS provisioner for Kubernetes</code>.</li></ul></div><div class="content edit-link"><a href="https://github.com/HewlettPackard/Docker-Synergy/edit/devel/docs-src/config-core/k8s-config.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Docker-Synergy/config-core/orchestrator-config.html" class="prev">
          Orchestrator configuration
        </a></span><span class="next"><a href="/Docker-Synergy/config-core/edit-vault.html">
          Protecting sensitive information
        </a> →
      </span></p></div></div></div></div>
    <script src="/Docker-Synergy/assets/js/app.825f9daf.js" defer></script><script src="/Docker-Synergy/assets/js/44.abe5797d.js" defer></script>
  </body>
</html>
