(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{164:function(e,t,a){"use strict";a.r(t);var o=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("h1",{attrs:{id:"rhel-golden-images"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#rhel-golden-images","aria-hidden":"true"}},[e._v("#")]),e._v(" RHEL Golden Images")]),o("h2",{attrs:{id:"os-installation-and-configuration-with-hpe-synergy-image-streamer"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#os-installation-and-configuration-with-hpe-synergy-image-streamer","aria-hidden":"true"}},[e._v("#")]),e._v(" OS installation and configuration with HPE Synergy Image Streamer")]),o("p",[e._v("The bare metal RHEL worker nodes will be deployed and customized using HPE Synergy Image Streamer. This section outlines the steps required to install the\nhost. At a high level, these steps can be described as:")]),o("ol",[o("li",[e._v("Download the artifacts for HPE Image Streamer from the HPE GitHub site.")]),o("li",[e._v("Add the artifact bundles to HPE Image Streamer.")]),o("li",[e._v("Prepare a compute module for the installation of the Operating System.")]),o("li",[e._v("Create a Server Profile.")]),o("li",[e._v("Install and customize the Operating System.")]),o("li",[e._v("Capture a Golden Image from the compute module.")]),o("li",[e._v("Deploy the hosts.")])]),o("h2",{attrs:{id:"download-the-artifacts-for-hpe-synergy-image-streamer"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#download-the-artifacts-for-hpe-synergy-image-streamer","aria-hidden":"true"}},[e._v("#")]),e._v(" Download the artifacts for HPE Synergy Image Streamer")]),o("p",[e._v("Red Hat Enterprise Linux bundles for HPE Image Streamer may be downloaded from\n"),o("a",{attrs:{href:"https://github.com/HewlettPackard/image-streamerrhel/tree/V4.1/artifact-bundles/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/image-streamerrhel/tree/V4.1/artifact-bundles/")]),e._v(".")]),o("p",[e._v("Sample foundation artifact bundles should be downloaded from\n"),o("a",{attrs:{href:"https://github.com/HewlettPackard/imagestreamer-tools/tree/v4.0/foundation/artifact-bundles",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/imagestreamer-tools/tree/v4.0/foundation/artifact-bundles")]),e._v(".")]),o("h2",{attrs:{id:"add-the-artifact-bundles-to-hpe-image-streamer"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#add-the-artifact-bundles-to-hpe-image-streamer","aria-hidden":"true"}},[e._v("#")]),e._v(" Add the artifact bundles to HPE Image Streamer")]),o("ol",[o("li",[e._v("From within the HPE Image Streamer interface navigate to the Artifact Bundles page.")]),o("li",[e._v("From the Actions menu, Add the downloaded RHEL artifact bundle. If not already present, add the sample foundation bundle.")]),o("li",[e._v("From the Actions menu, select Extract to extract the artifacts from each downloaded bundle.")])]),o("h2",{attrs:{id:"prepare-the-compute-module-for-the-installation-of-the-operating-system"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#prepare-the-compute-module-for-the-installation-of-the-operating-system","aria-hidden":"true"}},[e._v("#")]),e._v(" Prepare the compute module for the installation of the Operating System")]),o("ol",[o("li",[e._v("Attach a Red Hat Enterprise Linux 7.* Server ISO to the iLO of a worker node host by selecting the Action menu and then Launch Console.")]),o("li",[e._v("When the console launches, select Virtual Drives and then Image File CD-ROM/DVD. Browse to the location where your ISO resides and select\nit.")])]),o("h2",{attrs:{id:"create-a-server-profile"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create-a-server-profile","aria-hidden":"true"}},[e._v("#")]),e._v(" Create a Server Profile")]),o("ol",[o("li",[e._v("Use a Server Profile Template  to deploy a new Server Profile to the worker node host you attached the ISO to in the\nprior step.")]),o("li",[e._v("Select the new "),o("code",[e._v("Server Profile")]),e._v(" and choose "),o("code",[e._v("Edit")]),e._v(".")]),o("li",[e._v("Under the OS Deployment section, choose "),o("code",[e._v("HPE-Create Empty Volume")]),e._v(" and enter a Volume Size of "),o("code",[e._v("30720 MB")]),e._v(".")]),o("li",[e._v("Validate the network and SAN connections exist on the host.")]),o("li",[e._v("Ensure that, under boot settings,  Boot mode is set to "),o("code",[e._v("UEFI optimized")]),e._v(" and that the Primary boot device is "),o("code",[e._v("Hard disk")]),e._v(".")]),o("li",[e._v("Click "),o("code",[e._v("OK")]),e._v(". It will take some time for the profile to create.")]),o("li",[e._v("While waiting on profile creation to complete, select the "),o("code",[e._v("Actions")]),e._v(" menu and then click "),o("code",[e._v("Launch Console")]),e._v(". Click "),o("code",[e._v("Allow")]),e._v(" to launch the console.")])]),o("h2",{attrs:{id:"install-and-customize-the-operating-system"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#install-and-customize-the-operating-system","aria-hidden":"true"}},[e._v("#")]),e._v(" Install and customize the Operating System")]),o("ol",[o("li",[o("p",[e._v("After profile creation is completed, power on the server. From the console window, select "),o("code",[e._v("Power Switch")]),e._v(" and then "),o("code",[e._v("Momentary Press")]),e._v(".")])]),o("li",[o("p",[e._v("When the screen shown in the following figure appears, select "),o("code",[e._v("Install Red Hat Enterprise Linux 7.*")]),e._v(" and then hit the letter "),o("code",[e._v("‘e’")]),e._v(" on the keyboard.")]),o("p",[o("img",{attrs:{src:a(45),alt:' "Selecting OS to install"'}})]),o("p",[o("strong",[e._v("Figure.")]),e._v(" Selecting OS to install")])]),o("li",[o("p",[e._v("Append the following to the install kernel boot parameter: "),o("code",[e._v("rd.iscsi.ibft=1")])])]),o("li",[o("p",[e._v("Type "),o("code",[e._v("Ctrl-x")]),e._v(" to continue the boot process.")])]),o("li",[o("p",[e._v("When the installer screen appears, insure you select your local language, set the date and time,\nkeyboard layout and language support. When done, click "),o("code",[e._v("Installation Destination")]),e._v(".")])]),o("li",[o("p",[e._v("At the Installation Destination screen, select "),o("code",[e._v("Add a disk…")]),e._v(" and then choose the "),o("code",[e._v("30 GiB")]),e._v(" volume from HPE Image Streamer. Select\n"),o("code",[e._v("Done")]),e._v(" once you have chosen this disk.")])]),o("li",[o("p",[e._v("Under "),o("code",[e._v("Other Storage Options")]),e._v(", select the radio button for "),o("code",[e._v("I will configure partitioning")]),e._v(" and then click "),o("code",[e._v("Done")]),e._v(".")])]),o("li",[o("p",[e._v("At the "),o("code",[e._v("Manual Partitioning")]),e._v(" screen, select "),o("code",[e._v("Click here to create them automatically")]),e._v(". This will display a new Manual Partitioning screen.")])]),o("li",[o("p",[e._v("Highlight the "),o("code",[e._v("/boot")]),e._v(" partition and on the right side of the page select "),o("code",[e._v("ext4")]),e._v(" as the "),o("code",[e._v("File System")]),e._v(". Click the "),o("code",[e._v("Update Settings")]),e._v(" button.")])]),o("li",[o("p",[e._v("Highlight the "),o("code",[e._v("/")]),e._v(" partition and on the right side of the screen, reduce the "),o("code",[e._v("Desired Capacity")]),e._v(" to "),o("code",[e._v("8 GiB")]),e._v(" and then choose "),o("code",[e._v("ext4")]),e._v(" as the File System. Click the "),o("code",[e._v("Update Settings")]),e._v(" button.")])]),o("li",[o("p",[e._v("Highlight the "),o("code",[e._v("swap")]),e._v(" partition and on the right side of the screen, change "),o("code",[e._v("Desired Capacity")]),e._v(" from "),o("code",[e._v("3000 MiB")]),e._v(" to "),o("code",[e._v("4092 MiB")]),e._v(".\nClick the "),o("code",[e._v("Update Settings")]),e._v(" button.")])]),o("li",[o("p",[e._v("Click the "),o("code",[e._v("“+”")]),e._v(" button below the list of partitions. For "),o("code",[e._v("Mount Point")]),e._v(", select "),o("code",[e._v("/var")]),e._v(" from the dropdown and\nleave the "),o("code",[e._v("Desired Capacity")]),e._v(" blank. This will allow the "),o("code",[e._v("/var")]),e._v(" partition to use all remaining space.")])]),o("li",[o("p",[e._v("At the "),o("code",[e._v("Manual Partitioning")]),e._v(" screen, highlight the "),o("code",[e._v("/var")]),e._v(" partition and choose "),o("code",[e._v("/ext4")]),e._v(" for the "),o("code",[e._v("File System")]),e._v(". Click "),o("code",[e._v("Update Settings")]),e._v(".")])]),o("li",[o("p",[e._v("The screen should appear as shown in the following figure.")]),o("p",[o("img",{attrs:{src:a(46),alt:' "Manual partitioning"'}})]),o("p",[o("strong",[e._v("Figure.")]),e._v(" Manual partitioning")])]),o("li",[o("p",[e._v("Once you have validated the file systems and partition sizes are correct, click "),o("code",[e._v("Done")]),e._v(".")])]),o("li",[o("p",[e._v("When prompted, click "),o("code",[e._v("Accept Changes")]),e._v(".")])]),o("li",[o("p",[e._v("Click the "),o("code",[e._v("Network & Hostname")]),e._v(" link. At the resulting screen, highlight "),o("code",[e._v("Ethernet (ens3f4)")]),e._v(" and set it to "),o("code",[e._v("‘ON’")]),e._v(" in the descriptor screen as in the following figure. Click "),o("code",[e._v("Done")]),e._v(".")]),o("p",[o("img",{attrs:{src:a(47),alt:' "Network & Hostname"'}})]),o("p",[o("strong",[e._v("Figure.")]),e._v(" Network & Hostname")])]),o("li",[o("p",[e._v("Click "),o("code",[e._v("Begin Installation")]),e._v(". Set a root password for the host. Do not configure extra users. Click "),o("code",[e._v("Done")]),e._v(".")])]),o("li",[o("p",[e._v("Once the OS installation is complete you can reboot the host. Log on at the iLO console when the host becomes active again.")])]),o("li",[o("p",[e._v("Configure a temporary hostname for the system")])]),o("li",[o("p",[e._v("Configure your networking and ensure you have connectivity.")])]),o("li",[o("p",[e._v("Register the host with Red Hat by running the following command. Enter the username and password when prompted.")]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("# subscription-manager register\n")])])]),o("li",[o("p",[e._v("Use Red Hat subscription manager to register your system to give you access to the official Red Hat repositories. Use the subscription-manager register command as follows.")]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("# subscription-manager auto-attach \n")])])]),o("li",[o("p",[e._v("Enable the required repos:")]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("# subscription-manager repos \\\n--enable=rhel-7-server-rpms \\\n--enable=rhel-7-server-extras-rpms \\\n")])])]),o("li",[o("p",[e._v("Update the host by running the following command.")]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("# yum update\n")])])]),o("li",[o("p",[e._v("Copy the SSH public key from your Ansible box. This will allow your Ansible node to SSH without the need for a password to all the bare metal REHL nodes.")])])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("ssh-copy-id root@<IP of your bare metal node>\n")])]),o("ol",{attrs:{start:"27"}},[o("li",[e._v("Gracefully shut down the host.")])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("# shutdown -h now\n")])])])}],r=a(0),i=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},o,!1,null,null,null);t.default=i.exports},45:function(e,t,a){e.exports=a.p+"assets/img/bm-rhel-boot-params.66e270b2.png"},46:function(e,t,a){e.exports=a.p+"assets/img/bm-rhel-customizing-disk-partitions.922d6b2d.png"},47:function(e,t,a){e.exports=a.p+"assets/img/bm-rhel-network-hostname.050f0ce7.png"}}]);