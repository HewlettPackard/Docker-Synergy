(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{286:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),s("p",[e._v("To run the playbook on your Ansible controller:")]),e._v(" "),e._m(4),s("p",[e._v("The playbook relies on the variable "),s("code",[e._v("helm_version")]),e._v(" to determine the version of Helm to download. The playbooks have been tested using version "),s("code",[e._v("2.12.3")]),e._v(". You must also specify the appropriate checksum for the download in the variable "),s("code",[e._v("helm_checksum")]),e._v(". This value can be obtained from the downloads page at "),s("a",{attrs:{href:"https://github.com/helm/helm/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/helm/helm/releases"),s("OutboundLink")],1),e._v(". The "),s("code",[e._v("vars.sample")]),e._v(" file that ships with this release contains the following values:")]),e._v(" "),e._m(5),e._m(6),e._v(" "),s("p",[e._v("A number of sample charts are delivered with the solution, for the purposes of demonstration.")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),s("p",[e._v("The output shows that a single pod was deployed.")]),e._v(" "),e._m(11),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._m(17),e._v(" "),e._m(18),s("p",[e._v("Helm also allows you to easily delete installed releases. List the installed releases to find the name of the release you wish to delete.")]),e._v(" "),e._m(19),e._m(20),e._v(" "),e._m(21)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"installing-helm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-helm","aria-hidden":"true"}},[this._v("#")]),this._v(" Installing Helm")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[this._v("#")]),this._v(" Prerequisites")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("Install the "),s("code",[e._v("kubectl")]),e._v(" binary on your Ansible box")]),e._v(" "),s("li",[e._v("Install the UCP Client bundle for the "),s("code",[e._v("admin")]),e._v(" user")]),e._v(" "),s("li",[e._v("Confirm that you can connect to the cluster by running a test command, for example, "),s("code",[e._v("kubectl get nodes")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"playbook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#playbook","aria-hidden":"true"}},[this._v("#")]),this._v(" Playbook")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# cd ~/Docker-Synergy\n# ansible-playbook -i hosts playbooks/install_helm.yml --vault-password-file .vault_pass\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('helm_version: "2.12.3" \nhelm_checksum: "sha256:3425a1b37954dabdf2ba37d5d8a0bd24a225bb8454a06f12b115c55907809107"\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"install-sample-charts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-sample-charts","aria-hidden":"true"}},[this._v("#")]),this._v(" Install sample charts")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"alpine"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alpine","aria-hidden":"true"}},[this._v("#")]),this._v(" Alpine")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A simple chart is provided in the "),t("code",[this._v("~/Docker-Synergy/test/files/helm/alpine")]),this._v(" directory to run a single pod of Alpine Linux.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("code",[this._v("templates/")]),this._v(" directory contains a very simple pod resource with a couple of parameters. The "),t("code",[this._v("values.yaml")]),this._v(" file contains the default values for the "),t("code",[this._v("alpine-pod.yaml")]),this._v(" template.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# cd ~/Docker-Synergy\n# helm install test/files/helm/alpine\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("NAME:   old-mole\nLAST DEPLOYED: Fri Feb  8 17:27:35 2019\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==> v1/Pod\nNAME             READY  STATUS   RESTARTS  AGE\nold-mole-alpine  1/1    Running  0         0s\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("An example chart is provided in the "),t("code",[this._v("~/Docker-Synergy/test/files/helm/nginx")]),this._v(" directory to install a simple nginx server according to the following pattern:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("A ConfigMap is used to store the files the server will serve. ("),s("code",[e._v("templates/configmap.yaml")]),e._v(")")]),e._v(" "),s("li",[e._v("A Deployment is used to create a Replica Set of nginx pods. ("),s("code",[e._v("templates/deployment.yaml")]),e._v(")")]),e._v(" "),s("li",[e._v("A Service is used to create a gateway to the pods running in the replica set ("),s("code",[e._v("templates/service.yaml")]),e._v(")")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("code",[this._v("values.yaml")]),this._v(" exposes a few of the configuration options in the charts.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# cd ~/Docker-Synergy\n# helm install test/files/helm/nginx\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The output shows a service being created with a NodePort at "),t("code",[this._v("34567")]),this._v(". This value comes from the "),t("code",[this._v("values.yml")]),this._v(" file in the folder.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("NAME:   worn-olm\nLAST DEPLOYED: Fri Feb  8 16:23:21 2019\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==> v1/Deployment\nNAME            DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE\nworn-olm-nginx  1        1        1           1          14s\n\n==> v1/Pod(related)\nNAME                             READY  STATUS     RESTARTS  AGE\nworn-olm-nginx-7d648f7dfb-gg2jk  1/1    Running    0         14s\nworn-olm-nginx-vhwc7             0/1    Completed  0         14s\n\n==> v1/ConfigMap\nNAME            DATA  AGE\nworn-olm-nginx  2     14s\n\n==> v1/Service\nNAME            TYPE      CLUSTER-IP    EXTERNAL-IP  PORT(S)       AGE\nworn-olm-nginx  NodePort  10.96.30.222  <none>       80:34567/TCP  14s\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# helm list\nNAME            REVISION        UPDATED                         STATUS          CHART           APP VERSION     NAMESPACE\nworn-olm        1               Fri Feb  8 16:23:21 2019        DEPLOYED        nginx-0.1.0                     default\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Use the "),t("code",[this._v("helm delete")]),this._v(" command to remove the named release.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('# helm delete worn-olm\nrelease "worn-olm" deleted\n')])])])}],!1,null,null,null);t.default=n.exports}}]);