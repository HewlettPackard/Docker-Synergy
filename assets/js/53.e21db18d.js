(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{176:function(e,t,n){"use strict";n.r(t);var r=n(0),i=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"deploying-windows-workers-behind-a-proxy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#deploying-windows-workers-behind-a-proxy","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying Windows workers behind a proxy")]),n("h2",{attrs:{id:"configuring-the-winrm-remoting-script"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-winrm-remoting-script","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuring the "),n("code",[e._v("winrm")]),e._v(" remoting script")]),n("p",[e._v("The playbooks for deploying Windows workers rely on a Powershell script for remote access from the Ansible machine. The script "),n("code",[e._v("ConfigureRemotingForAnsible.ps1")]),e._v(" is available online on GitHub and you can configure the playbooks to use the script directly as follows:")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("windows_winrm_script: 'https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1'\n")])]),n("p",[e._v("However, if the deployment is running behind a proxy, you may need to make this script available locally.")]),n("ol",[n("li",[n("p",[e._v("Download the script:")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("curl https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1 \\\n-o ~/ConfigureRemotingForAnsible.ps1\n")])])]),n("li",[n("p",[e._v("Deploy a local HTTP server, enabling port 80, for example:")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("firewall-cmd --permanent --add-port 80/tcp --zone=public\nfirewall-cmd --permanent --change-interface=ens192 --zone=public\nfirewall-cmd --reload\n\ndnf install httpd\nsystemctl enable httpd\nsystemctl start httpd\n")])])]),n("li",[n("p",[e._v("Copy the downloaded script to the web server:")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cp ~/ConfigureRemotingForAnsible.ps1 /var/www/html\n")])])]),n("li",[n("p",[e._v("Configure the variable to point at the local web server, for example,")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("windows_winrm_script: 'http://10.10.174.230/ConfigureRemotingForAnsible.ps1'\n")])])])])])}],!1,null,null,null);t.default=i.exports}}]);