(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{178:function(e,t,r){"use strict";r.r(t);var n=r(0),i=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("h1",{attrs:{id:"deploying-windows-workers-behind-a-proxy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#deploying-windows-workers-behind-a-proxy","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying Windows workers behind a proxy")]),r("h2",{attrs:{id:"configuring-the-winrm-remoting-script"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-winrm-remoting-script","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuring the "),r("code",[e._v("winrm")]),e._v(" remoting script")]),r("p",[e._v("The playbooks for deploying Windows workers rely on a Powershell script for remote access from the Ansible machine. The script "),r("code",[e._v("ConfigureRemotingForAnsible.ps1")]),e._v(" is available online on GitHub and you can configure the playbooks to use the script directly as follows:")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("windows_winrm_script: 'https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1'\n")])]),r("p",[e._v("However, if the deployment is running behind a proxy, you may need to make this script available locally.")]),r("ol",[r("li",[r("p",[e._v("Download the script:")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("wget https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1\n")])])]),r("li",[r("p",[e._v("Deploy a local HTTP server, enabling port 80, for example:")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("yum install httpd\nsystemctl enable httpd\nsystemctl start httpd\nfirewall-cmd --permanent --add-port 80/tcp --zone=public\nfirewall-cmd --reload\n")])])]),r("li",[r("p",[e._v("Copy the downloaded script to the web server:")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("cp ConfigureRemotingForAnsible.ps1 /var/www/html\n")])])]),r("li",[r("p",[e._v("Configure the variable to point at the local web server, for example,")]),r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("windows_winrm_script: 'http://10.10.174.230/ConfigureRemotingForAnsible.ps1'\n")])])])])])}],!1,null,null,null);t.default=i.exports}}]);